query getUnassignedContributorsAssessorsData(
  $assessmentId: Int!
  $groupId: Int!
  $filter: String!
  $limit: Int!
  $offset: Int!
  $orderBy: user_order_by!
) {
  user(
    limit: $limit
    offset: $offset
    order_by: [{ assessment_assessors_aggregate: { count: desc } }, $orderBy]
    where: {
      _and: [
        {
          _not: {
            _or: [
              {
                assessment_assessors: { assessment_id: { _eq: $assessmentId } }
              }
              {
                assessment_contributors: {
                  assessment_id: { _eq: $assessmentId }
                }
              }
            ]
          }
        }
        { user_groups: { group_id: { _eq: $groupId } } }
        {
          _or: [
            { email: { _ilike: $filter } }
            { user_groups: { group: { name: { _ilike: $filter } } } }
          ]
        }
      ]
    }
  ) {
    id
    email
    user_groups {
      group {
        id
        name
      }
    }
  }
  field_aggregate: user_aggregate(
    where: {
      _and: [
        {
          _not: {
            _or: [
              {
                assessment_assessors: { assessment_id: { _eq: $assessmentId } }
              }
              {
                assessment_contributors: {
                  assessment_id: { _eq: $assessmentId }
                }
              }
            ]
          }
        }
        { user_groups: { group_id: { _eq: $groupId } } }
        {
          _or: [
            { email: { _ilike: $filter } }
            { user_groups: { group: { name: { _ilike: $filter } } } }
          ]
        }
      ]
    }
  ) {
    aggregate {
      count
    }
  }
}
